{% extends "base.html" %}



{% block title %}Home-page{% endblock title %}
{% load static %}

{% block style %}
<link rel="stylesheet" href="{% static 'css/player.css' %}">
{% endblock style %}

{% block content %}
<main>

<section class='leftside'>
    <div class='leftitems'>
        <div><a href="">Home</a></div>
        <div><a href="">My Library</a></div>
        <div><a href="">Playlist</a></div>
        <div><a href="">Downloads</a></div>
    </div>
</section>

<section class='rightside'>

    <!--Telugu songs-->
    <h1 class='language-name' style="color:white">‚ô™ Telugu songs</h1>
    <br>
    <div class='container'>
    {% for song in songs %}
        {% if song.language|lower == "telugu" %}
        <div class='img-name-con'>
            <img class="cover" src="{{ song.cover_image.url }}" width="150" data-id="{{ song.id }}">
            <p class='songname'>{{ song.song_name|truncatechars:17 }}</p>     
        </div>
        {% endif %}
    {% endfor %}
    </div>

    <!--Hindi songs-->
    <h1 class='language-name' style="color:white">‚ô™ Hindi songs</h1>
    <br>
    <div class='container'>
        {% for song in songs %}
        {% if song.language|lower == "hindi" %}
        <div class='img-name-con'>
            <img class="cover" src="{{ song.cover_image.url }}" width="150" data-id="{{ song.id }}">
            <p class='songname'>{{ song.song_name|truncatechars:17 }}</p>     
        </div>
        {% endif %}
        {% endfor %}
    </div>  

    <!--Tamil songs-->
    <h1 class='language-name' style="color:white">‚ô™ Tamil songs</h1>
    <br>
    <div class='container'>
        {% for song in songs %}
        {% if song.language|lower == "tamil" %}
        <div class='img-name-con'>
            <img class="cover" src="{{ song.cover_image.url }}" width="150" data-id="{{ song.id }}">
            <p class='songname'>{{ song.song_name|truncatechars:17 }}</p>     
        </div>
        {% endif %}
        {% endfor %}
    </div> 

    <!--Malayalam songs-->
    <h1 class='language-name' style="color:white">‚ô™ Malayalam songs</h1>
    <br>
    <div class='container'>
        {% for song in songs %}
        {% if song.language|lower == "malayalam" %}
        <div class='img-name-con'>
            <img class="cover" src="{{ song.cover_image.url }}" width="150" data-id="{{ song.id }}">
            <p class='songname'>{{ song.song_name|truncatechars:17 }}</p>     
        </div>
        {% endif %}
        {% endfor %}
    </div> 
</section>

<!-- Mini Player (hidden by default) -->
<div id="mini-player" class="mini-player hidden">
    <div class="mini-left">
        <img id="mini-cover" src="" alt="cover">
        <div class="mini-info">
            <p id="mini-title"></p>
            <p id="mini-artist"></p>
        </div>
    </div>

    <div class="mini-center">
        <button id="mini-prev">‚èÆ</button>
        <button id="mini-play">‚èØ</button>
        <button id="mini-next">‚è≠</button>
    </div>

    <div class="mini-progress-container">
        <span id="current-time">0:00</span>
        <input type="range" id="mini-progress" value="0" step="0.1">
        <span id="duration-time">0:00</span>
    </div>
    <audio id="mini-audio"></audio>
</div>

{% load static %}
<script>
    // Pass songs from Django to JS
    window.songs = {{ songs_json|safe }};
    console.log("üéß Songs loaded:", window.songs);
</script>

<!-- Player JS -->
<script src="{% static 'js/player.js' %}"></script>

{% endblock %}
</main>
